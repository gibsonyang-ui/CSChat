# ğŸ”„ Chatwoot ç¨³å®šæ›´æ–°å’Œç»´æŠ¤æŒ‡å—

## ğŸ“‹ é—®é¢˜è§£å†³æ€»ç»“

**åŸé—®é¢˜**: "ä¸ºä½•å¸¸å¸¸è°ƒæ•´è¿‡åï¼Œç®¡ç†å‘˜è´¦å·å°±æ— æ³•ç™»å…¥? æ¯æ¬¡æ›´æ–°æ—¶æŠ“å–gitä¸Šæœ€æ–°çš„ä¿®æ”¹æ¡£æ¡ˆï¼Œé¿å…è¿™ç§é—®é¢˜"

**âœ… å·²å®Œå…¨è§£å†³**: åˆ›å»ºäº†å®Œæ•´çš„è‡ªåŠ¨åŒ–æ›´æ–°å’Œç»´æŠ¤ç³»ç»Ÿï¼Œç¡®ä¿ç®¡ç†å‘˜è´¦å·å§‹ç»ˆå¯ç”¨ï¼Œå¹¶è‡ªåŠ¨ä»Gitè·å–æœ€æ–°æ›´æ”¹ã€‚

## ğŸ›  è§£å†³æ–¹æ¡ˆæ¦‚è¿°

### âœ… æ ¸å¿ƒé—®é¢˜è§£å†³

1. **ç®¡ç†å‘˜è´¦å·ä¿æŠ¤æœºåˆ¶**
   - è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤ç”¨æˆ·æ•°æ®
   - æ™ºèƒ½é‡ç½®ç®¡ç†å‘˜å¯†ç 
   - ç¡®ä¿æƒé™æ­£ç¡®è®¾ç½®
   - æ¸…é™¤æ‰€æœ‰ç™»å½•é™åˆ¶

2. **GitåŒæ­¥æœºåˆ¶**
   - æ™ºèƒ½æ£€æµ‹å’Œæš‚å­˜å½“å‰ä¿®æ”¹
   - å®‰å…¨åˆå¹¶è¿œç¨‹æ›´æ–°
   - å¼ºåˆ¶æ›´æ–°å¤‡é€‰æ–¹æ¡ˆ
   - è‡ªåŠ¨å¤„ç†å†²çª

3. **ç³»ç»Ÿç¨³å®šæ€§ä¿éšœ**
   - Redisç¼“å­˜è‡ªåŠ¨æ¸…ç†
   - åŠŸèƒ½æ ‡å¿—è‡ªåŠ¨é‡ç½®
   - åŸºç¡€æ•°æ®è‡ªåŠ¨åˆ›å»º
   - å¤šé‡çŠ¶æ€éªŒè¯

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šæ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨è - Windowsï¼‰

åŒå‡»è¿è¡Œ `update-chatwoot.bat`ï¼Œé€‰æ‹©ç›¸åº”æ“ä½œï¼š

```
[1] å¿«é€Ÿä¿®å¤ç®¡ç†å‘˜ç™»å½•é—®é¢˜    â† æœ€å¸¸ç”¨
[2] æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
[3] ä»Gitè·å–æœ€æ–°æ›´æ–°
[4] é‡å¯DockeræœåŠ¡
[5] å®Œæ•´ç³»ç»Ÿç»´æŠ¤
[6] æ‰“å¼€Chatwootä¸»é¡µ
[7] æ‰“å¼€å¢å¼ºåŠŸèƒ½æ¼”ç¤º
```

### æ–¹æ³•äºŒï¼šRubyè„šæœ¬ï¼ˆè·¨å¹³å°ï¼‰

```bash
# å¿«é€Ÿä¿®å¤ç®¡ç†å‘˜ç™»å½•é—®é¢˜
docker exec cschat-chatwoot-1 bundle exec rails runner /app/quick_fix_admin_login.rb

# å®Œæ•´ç¨³å®šæ›´æ–°
docker exec cschat-chatwoot-1 bundle exec rails runner /app/stable_update_system.rb

# ç³»ç»Ÿç¨³å®šæ€§æ£€æŸ¥
docker exec cschat-chatwoot-1 bundle exec rails runner /app/stability_check.rb
```

### æ–¹æ³•ä¸‰ï¼šPowerShellè„šæœ¬ï¼ˆWindowsé«˜çº§ç”¨æˆ·ï¼‰

```powershell
# å¿«é€Ÿä¿®å¤
.\Update-Chatwoot.ps1 -QuickFix

# å®Œæ•´æ›´æ–°
.\Update-Chatwoot.ps1 -FullUpdate

# çŠ¶æ€æ£€æŸ¥
.\Update-Chatwoot.ps1 -CheckStatus

# å¼ºåˆ¶é‡å¯
.\Update-Chatwoot.ps1 -Force
```

### æ–¹æ³•å››ï¼šBashè„šæœ¬ï¼ˆLinux/Macï¼‰

```bash
# è¿è¡Œè‡ªåŠ¨ç»´æŠ¤è„šæœ¬
chmod +x auto_update_and_maintain.sh
./auto_update_and_maintain.sh
```

## ğŸ” ç®¡ç†å‘˜è´¦å·ä¿¡æ¯

**ä¸»ç®¡ç†å‘˜è´¦å·**:
- **é‚®ç®±**: gibson@localhost.com
- **å¯†ç **: Gibson888555!
- **æƒé™**: å®Œæ•´ç®¡ç†å‘˜æƒé™

**å¤‡ç”¨ç®¡ç†å‘˜è´¦å·**:
- **é‚®ç®±**: admin@localhost.com
- **å¯†ç **: BackupAdmin123!
- **æƒé™**: å®Œæ•´ç®¡ç†å‘˜æƒé™

## ğŸ“Š ç³»ç»ŸåŠŸèƒ½éªŒè¯

### âœ… åŸºç¡€åŠŸèƒ½
- **HTTPæœåŠ¡**: http://localhost:3000 âœ…
- **ç®¡ç†å‘˜ç™»å½•**: ä¸¤ä¸ªç®¡ç†å‘˜è´¦å·éƒ½å¯ç”¨ âœ…
- **åŠŸèƒ½æ ‡å¿—**: 2147483647 (æ‰€æœ‰åŠŸèƒ½å¯ç”¨) âœ…
- **åŸºç¡€æ•°æ®**: æ”¶ä»¶ç®±ã€å›¢é˜Ÿã€æ ‡ç­¾ç­‰ âœ…

### âœ… å¢å¼ºåŠŸèƒ½
- **APIå®¢æˆ·ç«¯**: http://localhost:3000/enhanced_agents_api.js âœ…
- **UIå¢å¼ºå™¨**: http://localhost:3000/chatwoot_ui_enhancer.js âœ…
- **æ¼”ç¤ºé¡µé¢**: http://localhost:3000/enhanced_features_demo.html âœ…

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**1. ç®¡ç†å‘˜æ— æ³•ç™»å½•**
```bash
# è¿è¡Œå¿«é€Ÿä¿®å¤
docker exec cschat-chatwoot-1 bundle exec rails runner /app/quick_fix_admin_login.rb
```

**2. DockeræœåŠ¡å¼‚å¸¸**
```bash
# é‡å¯DockeræœåŠ¡
docker-compose -f docker-compose.clean.yaml restart
```

**3. åŠŸèƒ½ç¼ºå¤±**
```bash
# é‡æ–°å¯ç”¨æ‰€æœ‰åŠŸèƒ½
docker exec cschat-chatwoot-1 bundle exec rails runner /app/enable_all_features.rb
```

**4. ç™»å½•429é”™è¯¯**
```bash
# æ¸…é™¤ç™»å½•é™åˆ¶
docker exec cschat-chatwoot-1 bundle exec rails runner /app/clear_rate_limits.rb
```

**5. GitåŒæ­¥é—®é¢˜**
```bash
# å¼ºåˆ¶ä»è¿œç¨‹æ›´æ–°
git fetch origin main
git reset --hard origin/main
```

### ç´§æ€¥æ¢å¤æ­¥éª¤

å¦‚æœç³»ç»Ÿå®Œå…¨æ— æ³•ä½¿ç”¨ï¼š

1. **å®Œå…¨é‡å¯**:
   ```bash
   docker-compose -f docker-compose.clean.yaml down
   docker-compose -f docker-compose.clean.yaml up -d
   ```

2. **ç­‰å¾…å¯åŠ¨** (60ç§’)

3. **è¿è¡Œå®Œæ•´ä¿®å¤**:
   ```bash
   docker exec cschat-chatwoot-1 bundle exec rails runner /app/stable_update_system.rb
   ```

4. **éªŒè¯çŠ¶æ€**:
   ```bash
   docker exec cschat-chatwoot-1 bundle exec rails runner /app/stability_check.rb
   ```

## ğŸ“… ç»´æŠ¤å»ºè®®

### å®šæœŸç»´æŠ¤

**æ¯æ—¥**:
- æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
- éªŒè¯ç®¡ç†å‘˜è´¦å·å¯ç”¨æ€§

**æ¯å‘¨**:
- è¿è¡Œå®Œæ•´ç³»ç»Ÿç»´æŠ¤
- ä»Gitè·å–æœ€æ–°æ›´æ–°
- æ¸…ç†Dockerå®¹å™¨å’Œé•œåƒ

**æ¯æœˆ**:
- å¤‡ä»½é‡è¦æ•°æ®
- æ›´æ–°Dockeré•œåƒ
- æ£€æŸ¥ç³»ç»Ÿæ€§èƒ½

### é¢„é˜²æªæ–½

1. **æ›´æ–°å‰**:
   - è¿è¡Œ `update-chatwoot.bat` é€‰æ‹© [2] æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
   - ç¡®ä¿DockeræœåŠ¡æ­£å¸¸è¿è¡Œ

2. **æ›´æ–°å**:
   - è¿è¡Œ `update-chatwoot.bat` é€‰æ‹© [1] å¿«é€Ÿä¿®å¤
   - éªŒè¯ç®¡ç†å‘˜è´¦å·å¯ä»¥ç™»å½•

3. **å®šæœŸæ£€æŸ¥**:
   - æ¯æ¬¡é‡å¤§ä¿®æ”¹åè¿è¡Œç¨³å®šæ›´æ–°è„šæœ¬
   - ä¿æŒGitä»“åº“åŒæ­¥
   - ç›‘æ§ç³»ç»Ÿæ—¥å¿—

## ğŸ¯ è‡ªåŠ¨åŒ–æµç¨‹

### å®Œæ•´æ›´æ–°æµç¨‹

1. **å¤‡ä»½å½“å‰æ•°æ®**
2. **ä»Gitè·å–æœ€æ–°æ›´æ”¹**
3. **é‡å¯DockeræœåŠ¡**
4. **è¿è¡Œç¨³å®šæ›´æ–°è„šæœ¬**
5. **é‡ç½®ç®¡ç†å‘˜è´¦å·**
6. **æ¸…é™¤ç™»å½•é™åˆ¶**
7. **éªŒè¯ç³»ç»ŸçŠ¶æ€**
8. **éƒ¨ç½²å¢å¼ºåŠŸèƒ½**

### å¿«é€Ÿä¿®å¤æµç¨‹

1. **æ¸…é™¤Redisç¼“å­˜**
2. **é‡ç½®ç®¡ç†å‘˜å¯†ç **
3. **ç¡®ä¿è´¦å·æƒé™**
4. **éªŒè¯ç™»å½•çŠ¶æ€**

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹Chatwootæ—¥å¿—
docker logs cschat-chatwoot-1 --tail=50

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker logs cschat-postgres-1 --tail=20

# æŸ¥çœ‹Redisæ—¥å¿—
docker logs cschat-redis-1 --tail=20
```

### çŠ¶æ€æ£€æŸ¥

```bash
# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker-compose -f docker-compose.clean.yaml ps

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -an | findstr :3000

# æ£€æŸ¥ç£ç›˜ç©ºé—´
docker system df
```

## ğŸ‰ æ€»ç»“

ç°åœ¨æ‚¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€è‡ªåŠ¨åŒ–çš„Chatwootç»´æŠ¤ç³»ç»Ÿï¼š

âœ… **ç®¡ç†å‘˜è´¦å·æ°¸è¿œå¯ç”¨** - å¤šé‡ä¿æŠ¤æœºåˆ¶ç¡®ä¿ç™»å½•ä¸ä¼šå¤±è´¥
âœ… **Gitè‡ªåŠ¨åŒæ­¥** - æ™ºèƒ½è·å–æœ€æ–°æ›´æ”¹ï¼Œé¿å…æ‰‹åŠ¨æ“ä½œ
âœ… **ä¸€é”®å¼ç»´æŠ¤** - ç®€å•çš„æ‰¹å¤„ç†æ–‡ä»¶ï¼Œæ— éœ€æŠ€æœ¯çŸ¥è¯†
âœ… **å¤šå¹³å°æ”¯æŒ** - Windowsã€Linuxã€Macéƒ½æœ‰å¯¹åº”çš„è„šæœ¬
âœ… **æ•…éšœè‡ªåŠ¨æ¢å¤** - å¤šé‡å¤‡é€‰æ–¹æ¡ˆï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®š

**ğŸ¯ ä½¿ç”¨å»ºè®®**: æ¯æ¬¡å¯¹ç³»ç»Ÿè¿›è¡Œé‡å¤§ä¿®æ”¹åï¼Œè¿è¡Œ `update-chatwoot.bat` é€‰æ‹© [1] å¿«é€Ÿä¿®å¤ï¼Œç¡®ä¿ç®¡ç†å‘˜è´¦å·å¯ç”¨ã€‚å®šæœŸè¿è¡Œ [5] å®Œæ•´ç³»ç»Ÿç»´æŠ¤ï¼Œä¿æŒç³»ç»Ÿæœ€æ–°çŠ¶æ€ã€‚
